<!DOCTYPE html>
<html lang="es">
  <head>
    <title>Lite XL - Process API</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/svg" href="/assets/img/logo.svg">
    <link rel="stylesheet" href="/assets/stylesheet.css"/>
    <script type='text/javascript' src='/assets/javascript.js'></script>
    <meta name="description" content="Un editor de texto ligero, simple, rápido, lleno de características y extremadamente extensible escrito en C y Lua, adaptado de lite.">
  </head>
  <body>
    <header>
      <logo>
        <a href='/es'><img class='logo' src='/assets/img/logo.svg'/></a>
        <h2><a href='/es'>Lite XL</a></h2>
      </logo>
      <links>
        <menu>
          <h2><a href="#">
            <img src="/assets/img/flags/us.svg"/>
              ES
          </a></h2>
          <items>
            <a href="/en/tutorials/overview/process">
              <img src="/assets/img/flags/us.svg"/>
              English
            </a>
            <a href="/en/tutorials/overview/process">
              <img src="/assets/img/flags/us.svg"/>
              Español
            </a>
            <a href="/de/tutorials/overview/process">
              <img src="/assets/img/flags/de.svg"/>
              Deutsch
            </a>
          </items>
        </menu>
        <menu>
          <h2><a href='/es/about'>Acerca de</a></h2>
          <items>
            <a href='/es/about/faq'>FAQ</a>
            <a href='/es/about/features'>Características</a>
            <a href='/es/about/screenshots'>Capturas</a>
            <a href='/es/about/contributors'>Contribuyentes</a>
          </items>
        </menu>
        <menu>
          <h2><a href='/es/documentation'>Documentación</a></h2>
          <items>
            <a href='/es/documentation/usage'>Uso</a>
            <a href='/es/documentation/build'>Compilación</a>
            <a href='/es/documentation/keymap'>Mapa de teclas por defecto</a>
            <a href='/es/documentation/keymap-macos'>Mapa de teclas de MacOS</a>
          </items>
        </menu>
        <menu>
          <h2><a href='/es/tutorials'>Tutoriales</a></h2>
          <items>
            <a href='/es/tutorials/simple-plugin'>Un plugin simple</a>
            <a href='/es/tutorials/syntax-highlighting'>Resaltado de sintaxis</a>
            <a href='/es/tutorials/api-overview'>Descripción del API</a>
            <a href='/es/tutorials/system-fonts'>Fuentes del sistema</a>
          </items>
        </menu>
        <h2><a target="_blank" href='https://github.com/lite-xl/lite-xl-plugins'>
          <svg style="width:24px;height:24px" viewBox="0 0 24 24">
            <path fill="currentColor" d="M19 6V5A2 2 0 0 0 17 3H15A2 2 0 0 0 13 5V6H11V5A2 2 0 0 0 9 3H7A2 2 0 0 0 5 5V6H3V20H11.81A6.5 6.5 0 0 1 21 10.81V6M20.31 17.9A4.5 4.5 0 1 0 18.88 19.32L22 22.39L23.39 21M16.5 18A2.5 2.5 0 1 1 19 15.5A2.5 2.5 0 0 1 16.5 18Z" />
          </svg>
          Plugins
        </a></h2>
        <h2><a href='/es/downloads'>
          <svg style="width:24px;height:24px" viewBox="0 0 24 24">
            <path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
          </svg>
          Descargas
        </a></h2>
      </links>
      <links>
        <h2><a href='https://duckduckgo.com/?sites=lite-xl.com&kae=d&kt=p&kp=1&kn=1&k1=-1&q=%20'>
          <svg style="width:24px;height:24px" viewBox="0 0 24 24">
            <path fill="currentColor" d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" />
        </svg>
          Buscar
        </a></h2>
      </links>
      <expander/>
    </header>
    <content>
      <page id='page-tutorials-overview-process'>
        <h4 id="outdated" style="display:none">
          Una versión más actualizada de esta página está en <a href="/en/tutorials/overview/process">inglés</a>.
        </h4>
        <h1 id="toc_282">Process API</h1>

<p>Lite XL provides a process API to launch external applications. This API is meant to replace
lua&#39;s <code>io.popen</code> and lite&#39;s <a title='' target='_blank' href='https://github.com/rxi/console/blob/fb3d414d085d4110364314d6cd8380dc1d386249/init.lua#L100'>pipe-to-a-file</a> approach.</p>

<p>Advantages of this API includes:</p>

<ul>
<li>Proper argument escaping (arguments are supplied via a table)</li>
<li>Nonblocking IO</li>
<li>Able to detach processes from Lite XL <a title='' target='_blank' href='https://github.com/lite-xl/lite-xl/pull/535'>(in progress)</a></li>
<li>Does not create temporary files</li>
<li>Mostly cross-platform (does not require special code for each shell)</li>
</ul>

<h2 id="toc_283">Using the Process API</h2>

<h3 id="toc_284">Error handling</h3>

<ul>
<li><code>process.start()</code> may throw errors if it cannot run the program.</li>
<li><code>process.read*</code> and <code>process.write</code> functions may throw errors if

<ul>
<li>the process ended</li>
<li>the process closed the stream</li>
<li>you closed the stream</li>
</ul></li>
<li>there might be other errors to look forward to too</li>
</ul>

<h3 id="toc_285">Starting a process</h3>

<p>To start a process, use <code>process.start(args, options)</code>.</p>

<p>Here are some of the more useful arguments.</p>

<ul>
<li><code>args</code>: The executable and any arguments, eg: <code>{ &quot;sh&quot;, &quot;-c&quot;, &quot;echo hello world&quot; }</code></li>
<li><code>options</code>: Options for <code>process.start()</code>

<ul>
<li><code>env</code>: A key-value table containing the env. <strong>Note that if this is provided,
    environment variables will not be inherited.</strong></li>
<li><code>stdin</code>: Specify where to redirect stdin</li>
<li><code>stdout</code>: Specify where to redirect stdout</li>
<li><code>stderr</code>: Specify where to redirect stderr</li>
</ul></li>
</ul>

<p>for <code>options.std{in,out,err}</code>, valid values are:</p>

<ul>
<li><code>process.REDIRECT_PIPE</code> (Make it available to subprocess API for reading / writing)</li>
<li><code>process.REDIRECT_DISCARD</code> (Discard the output. Use this to prevent buffering)</li>
<li><code>process.REDIRECT_STDOUT</code> (<code>stderr</code> only, for redirecting <code>stderr</code> to <code>stdout</code>)</li>
</ul>

<h3 id="toc_286">Reading from process</h3>

<p>To read from <code>stdout</code> or <code>stderr</code> of a process, use <code>process:read_stdout()</code> and
<code>process:read_stderr()</code> respectively.</p>

<p>You can specify a numeric argument to them, which will change the size of internal buffer used
to read the output.</p>

<p>Alternatively, you could use <code>process:read()</code> with <code>process.STREAM_STDERR</code> and <code>process.STREAM_STDOUT</code>.</p>

<p><strong>Example:</strong></p>
<pre><span class="kd">local</span> <span class="n">proc</span> <span class="o">=</span> <span class="n">process</span><span class="p">.</span><span class="n">start</span> <span class="p">{</span> <span class="s2">"sh"</span><span class="p">,</span> <span class="s2">"-c"</span><span class="p">,</span> <span class="s2">"echo hello world!"</span> <span class="p">}</span>

<span class="c1">-- do not use `while proc:running()` if you care about output.</span>
<span class="c1">-- The process could die and leave data in the buffer</span>
<span class="c1">-- You should just read until `proc:read_stdout()` returns nil</span>
<span class="k">while</span> <span class="kc">true</span> <span class="k">do</span>
  <span class="kd">local</span> <span class="n">rdbuf</span> <span class="o">=</span> <span class="n">proc</span><span class="p">:</span><span class="n">read_stdout</span><span class="p">()</span>
  <span class="k">if</span> <span class="ow">not</span> <span class="n">rdbuf</span> <span class="k">then</span> <span class="k">break</span> <span class="k">end</span>
  <span class="c1">-- yay, output</span>
<span class="k">end</span>
</pre>
<h3 id="toc_287">Writing to process</h3>

<p>You can use <code>process:write(data)</code> to write a string to <code>stdin</code>.</p>

<h3 id="toc_288">Checking completion</h3>

<ul>
<li><code>process:running()</code> returns a boolean to indicate whether if the process is running.</li>
<li><code>process:wait(time)</code> also does the same thing, but you specify how long it should wait (or 0 to return immediately).</li>
</ul>

<h3 id="toc_289">Terminating process</h3>

<ul>
<li><code>process:terminate()</code> sends SIGTERM (or Windows equivalent) to the process.</li>
<li><code>process:kill()</code> sends SIGKILL (or Windows equivalent) to the progress.
<strong>Use this only if <code>process:terminate()</code> cannot kill the process, <a title='' target='_blank' href='http://turnoff.us/geek/dont-sigkill/'>as it can cause issues</a>.</strong></li>
</ul>

<h3 id="toc_290">Misc</h3>

<ul>
<li><code>process:pid()</code> returns the PID of the process.
<strong>There are no guarantees for this PID to be correct if the process terminated early.</strong></li>
<li><code>process:returncode()</code> returns the exit code of the process, if any</li>
<li><code>process:close_stream()</code> closes <code>stdin</code>, <code>stdout</code> or <code>stderr</code> stream of the process.</li>
</ul>

      </page>
      <sidebar>
        <box>
          <h2>Involúcrate</h2>
          <a target='_blank' href='https://github.com/lite-xl/lite-xl'>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 18 18">
              <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
            </svg>
            Github
          </a>
          <a target='_blank' href='https://discord.gg/UQKnzBhY5H'>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 18 18">
              <path d="M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"/>
            </svg>
            Discord
          </a>
          <a target='_blank' href='https://matrix.to/#/#lite-xl:matrix.org'>
            <svg xmlns="http://www.w3.org/2000/svg" style="padding-right: 2px;" width="22" height="24" viewBox="0 0 520 520">
              <path d="M13.7,11.9v496.2h35.7V520H0V0h49.4v11.9H13.7z"/><path d="M166.3,169.2v25.1h0.7c6.7-9.6,14.8-17,24.2-22.2c9.4-5.3,20.3-7.9,32.5-7.9c11.7,0,22.4,2.3,32.1,6.8c9.7,4.5,17,12.6,22.1,24c5.5-8.1,13-15.3,22.4-21.5c9.4-6.2,20.6-9.3,33.5-9.3c9.8,0,18.9,1.2,27.3,3.6c8.4,2.4,15.5,6.2,21.5,11.5c6,5.3,10.6,12.1,14,20.6c3.3,8.5,5,18.7,5,30.7v124.1h-50.9V249.6c0-6.2-0.2-12.1-0.7-17.6c-0.5-5.5-1.8-10.3-3.9-14.3c-2.2-4.1-5.3-7.3-9.5-9.7c-4.2-2.4-9.9-3.6-17-3.6c-7.2,0-13,1.4-17.4,4.1c-4.4,2.8-7.9,6.3-10.4,10.8c-2.5,4.4-4.2,9.4-5,15.1c-0.8,5.6-1.3,11.3-1.3,17v103.3h-50.9v-104c0-5.5-0.1-10.9-0.4-16.3c-0.2-5.4-1.3-10.3-3.1-14.9c-1.8-4.5-4.8-8.2-9-10.9c-4.2-2.7-10.3-4.1-18.5-4.1c-2.4,0-5.6,0.5-9.5,1.6c-3.9,1.1-7.8,3.1-11.5,6.1c-3.7,3-6.9,7.3-9.5,12.9c-2.6,5.6-3.9,13-3.9,22.1v107.6h-50.9V169.2H166.3z"/>
              <path d="M506.3,508.1V11.9h-35.7V0H520v520h-49.4v-11.9H506.3z"/>
            </svg>
            Matrix
          </a>
          <!--
          <a target='_blank' href='https://adamharrison.github.io/lite-xl-web'>
            <svg style="width:22px;height:22px" viewBox="0 0 24 24">
              <path fill="currentColor" d="M21,2H3A2,2 0 0,0 1,4V20A2,2 0 0,0 3,22H21A2,2 0 0,0 23,20V4A2,2 0 0,0 21,2M11,17.5L9.5,19L5,14.5L9.5,10L11,11.5L8,14.5L11,17.5M14.5,19L13,17.5L16,14.5L13,11.5L14.5,10L19,14.5L14.5,19M21,7H3V4H21V7Z" />
            </svg>
            Try Live!
          </a>
          -->
        </box>
        <box>
          <h2>Estado</h2>
          <a target='_blank' href='https://discord.gg/UQKnzBhY5H'><img src='https://img.shields.io/discord/847122429742809208?label=discord&logo=discord'/></a>
          <a target='_blank' href='https://repology.org/project/lite-xl/versions#align-right'><img style='width: 100%;' src='https://repology.org/badge/vertical-allrepos/lite-xl.svg'/></a>
        </box>
      </sidebar>
    </content>
  </body>
</html>
